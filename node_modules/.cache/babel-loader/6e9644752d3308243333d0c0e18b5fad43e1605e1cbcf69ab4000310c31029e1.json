{"ast":null,"code":"var _jsxFileName = \"D:\\\\SIH\\\\Sample\\\\Echolink-videointercom\\\\src\\\\components\\\\CallLog.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { FiPhone, FiArrowUp, FiArrowDown } from 'react-icons/fi';\n\n// Helper function to format date and time\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatDateTime = dateTime => {\n  const date = new Date(dateTime);\n  return {\n    date: date.toLocaleDateString('en-US'),\n    time: date.toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: true\n    })\n  };\n};\nconst CallLogPage = ({\n  darkMode\n}) => {\n  _s();\n  const [callLogs, setCallLogs] = useState([]);\n  const fetchCallLogs = async () => {\n    try {\n      const response = await fetch('https://server-ou54.onrender.com/webapi/core/cdr');\n      const data = await response.json();\n      const sortedLogs = data.sort((a, b) => new Date(b.start_stamp) - new Date(a.start_stamp));\n      setCallLogs(sortedLogs);\n    } catch (error) {\n      console.error('Error fetching call logs:', error);\n    }\n  };\n  useEffect(() => {\n    fetchCallLogs();\n    const interval = setInterval(fetchCallLogs, 5000);\n    return () => clearInterval(interval);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4 py-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-2xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold mb-6 text-gray-800 dark:text-white text-center\",\n        children: \"Call Log\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: callLogs.length > 0 ? callLogs.map((log, index) => {\n          const {\n            date,\n            time\n          } = formatDateTime(log.start_stamp);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold text-gray-800 dark:text-white\",\n                children: log.caller_id_name || 'Unknown Caller'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600 dark:text-gray-300\",\n                children: log.caller_id_number || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 50,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500 dark:text-gray-400\",\n                children: [date, \" at \", time]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [log.call_direction === 'incoming' && /*#__PURE__*/_jsxDEV(FiArrowDown, {\n                className: \"text-green-500 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 59\n              }, this), log.call_direction === 'outgoing' && /*#__PURE__*/_jsxDEV(FiArrowUp, {\n                className: \"text-blue-500 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 59\n              }, this), log.call_direction === 'missed' && /*#__PURE__*/_jsxDEV(FiPhone, {\n                className: \"text-red-500 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"capitalize text-gray-600 dark:text-gray-300\",\n                children: log.call_direction || 'Unknown'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 17\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-500 dark:text-gray-400\",\n          children: \"No call logs available.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n_s(CallLogPage, \"aDDOUqBcVQ35AnjCV/m2ZEd/X7M=\");\n_c = CallLogPage;\nexport default CallLogPage;\nvar _c;\n$RefreshReg$(_c, \"CallLogPage\");","map":{"version":3,"names":["React","useState","useEffect","FiPhone","FiArrowUp","FiArrowDown","jsxDEV","_jsxDEV","formatDateTime","dateTime","date","Date","toLocaleDateString","time","toLocaleTimeString","hour","minute","hour12","CallLogPage","darkMode","_s","callLogs","setCallLogs","fetchCallLogs","response","fetch","data","json","sortedLogs","sort","a","b","start_stamp","error","console","interval","setInterval","clearInterval","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","log","index","caller_id_name","caller_id_number","call_direction","_c","$RefreshReg$"],"sources":["D:/SIH/Sample/Echolink-videointercom/src/components/CallLog.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FiPhone, FiArrowUp, FiArrowDown } from 'react-icons/fi';\r\n\r\n// Helper function to format date and time\r\nconst formatDateTime = (dateTime) => {\r\n  const date = new Date(dateTime);\r\n  return {\r\n    date: date.toLocaleDateString('en-US'),\r\n    time: date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true }),\r\n  };\r\n};\r\n\r\nconst CallLogPage = ({ darkMode }) => {\r\n  const [callLogs, setCallLogs] = useState([]);\r\n\r\n  const fetchCallLogs = async () => {\r\n    try {\r\n      const response = await fetch('https://server-ou54.onrender.com/webapi/core/cdr');\r\n      const data = await response.json();\r\n      const sortedLogs = data.sort((a, b) => new Date(b.start_stamp) - new Date(a.start_stamp));\r\n      setCallLogs(sortedLogs);\r\n    } catch (error) {\r\n      console.error('Error fetching call logs:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCallLogs();\r\n    const interval = setInterval(fetchCallLogs, 5000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"max-w-2xl mx-auto\">\r\n        <h2 className=\"text-2xl font-bold mb-6 text-gray-800 dark:text-white text-center\">Call Log</h2>\r\n        <div className=\"space-y-4\">\r\n          {callLogs.length > 0 ? (\r\n            callLogs.map((log, index) => {\r\n              const { date, time } = formatDateTime(log.start_stamp);\r\n              return (\r\n                <div\r\n                  key={index}\r\n                  className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex items-center justify-between\"\r\n                >\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-800 dark:text-white\">\r\n                      {log.caller_id_name || 'Unknown Caller'}\r\n                    </h3>\r\n                    <p className=\"text-gray-600 dark:text-gray-300\">{log.caller_id_number || 'N/A'}</p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">{date} at {time}</p>\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    {log.call_direction === 'incoming' && <FiArrowDown className=\"text-green-500 mr-2\" />}\r\n                    {log.call_direction === 'outgoing' && <FiArrowUp className=\"text-blue-500 mr-2\" />}\r\n                    {log.call_direction === 'missed' && <FiPhone className=\"text-red-500 mr-2\" />}\r\n                    <span className=\"capitalize text-gray-600 dark:text-gray-300\">{log.call_direction || 'Unknown'}</span>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })\r\n          ) : (\r\n            <p className=\"text-center text-gray-500 dark:text-gray-400\">No call logs available.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CallLogPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}